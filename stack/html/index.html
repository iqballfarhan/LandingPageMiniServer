<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mini Server â€¢ Dashboard</title>
  <link rel="icon" type="image/png" href="https://assets.ubuntu.com/v1/29985a98-ubuntu-logo32.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="color-scheme" content="dark light" />
  <style>
    html, body { height: 100%; }
    .glass { backdrop-filter: saturate(180%) blur(10px); background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04)); }
    .ping-dot { width:10px; height:10px; border-radius:50%; display:inline-block; }
    @keyframes ping { 0% {transform: scale(1); opacity: 1;} 75%,100% {transform: scale(2); opacity: 0;} }
    .dot { position: relative; }
    .dot::after { content:''; position:absolute; top:0; left:0; width:100%; height:100%; border-radius:50%; background:currentColor; opacity:.4; animation:ping 1.5s infinite; }
    
    /* Page Load Animation */
    @keyframes pageLoad {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* Fade In with Scale */
    @keyframes fadeInScale {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    
    /* Slide In from Bottom */
    @keyframes slideInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* Logo Rotation with Glow */
    @keyframes logoGlow {
      0%, 100% { 
        transform: rotate(0deg) scale(1);
        filter: drop-shadow(0 0 15px rgba(234,88,12,0.5));
      }
      50% { 
        transform: rotate(180deg) scale(1.1);
        filter: drop-shadow(0 0 25px rgba(234,88,12,0.8));
      }
    }
    
    /* Card Hover Scale */
    .glass:hover {
      transform: translateY(-5px) scale(1.02);
      transition: all 0.3s ease;
    }
    
    /* Staggered Card Animation */
    @keyframes cardSlideIn {
      from {
        opacity: 0;
        transform: translateY(30px) rotateX(-10deg);
      }
      to {
        opacity: 1;
        transform: translateY(0) rotateX(0);
      }
    }
    
    body { 
      animation: pageLoad 0.5s ease-out;
    }
    
    .header-animate {
      animation: fadeInScale 0.8s ease-out;
    }
    
    .logo-rotate {
      animation: logoGlow 4s ease-in-out infinite;
    }
    
    .card-animate {
      opacity: 0;
      animation: cardSlideIn 0.6s ease-out forwards;
    }
    
    /* Individual card delays */
    .card-animate:nth-child(1) { animation-delay: 0.1s; }
    .card-animate:nth-child(2) { animation-delay: 0.2s; }
    .card-animate:nth-child(3) { animation-delay: 0.3s; }
    .card-animate:nth-child(4) { animation-delay: 0.4s; }
    .card-animate:nth-child(5) { animation-delay: 0.5s; }
    .card-animate:nth-child(6) { animation-delay: 0.6s; }
    .card-animate:nth-child(7) { animation-delay: 0.7s; }
    .card-animate:nth-child(8) { animation-delay: 0.8s; }
    .card-animate:nth-child(9) { animation-delay: 0.9s; }
    
    .footer-animate {
      animation: slideInUp 0.8s ease-out 1s both;
    }
    
    /* Button ripple effect */
    #logout {
      position: relative;
      overflow: hidden;
    }
    
    #logout::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }
    
    #logout:hover::before {
      width: 400px;
      height: 400px;
    }
    
    /* Stars Background */
    #stars-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }
    
    main {
      position: relative;
      z-index: 1;
    }
    
    /* Modern Loading Screen */
    #loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
    }
    
    #loading-screen.hidden {
      opacity: 0;
      visibility: hidden;
    }
    
    /* Spinning Logo */
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .loading-logo {
      animation: spin 1.5s linear infinite;
      filter: drop-shadow(0 0 30px rgba(234,88,12,0.8));
    }
    
    /* Loading Progress Bar */
    @keyframes progress {
      0% { width: 0%; }
      100% { width: 100%; }
    }
    
    .progress-bar {
      width: 200px;
      height: 3px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      overflow: hidden;
      margin-top: 30px;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #0ea5e9, #38bdf8);
      border-radius: 10px;
      animation: progress 1.5s ease-out;
      box-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
    }
    
    /* Loading Text */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .loading-text {
      margin-top: 20px;
      color: rgba(255,255,255,0.7);
      font-size: 14px;
      animation: pulse 1.5s ease-in-out infinite;
    }
  </style>
</head>
<body class="min-h-screen bg-slate-950 text-slate-100 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-sky-900/20 via-slate-900 to-slate-950">
  <!-- Loading Screen -->
  <div id="loading-screen">
    <img src="https://assets.ubuntu.com/v1/29985a98-ubuntu-logo32.png" alt="Loading" class="w-20 h-20 loading-logo">
    <div class="progress-bar">
      <div class="progress-fill"></div>
    </div>
    <p class="loading-text">Loading Dashboard...</p>
  </div>
  
  <canvas id="stars-canvas"></canvas>

  <main class="min-h-screen px-4 py-10 flex flex-col justify-between">
    <!-- HEADER -->
    <section class="text-center mb-10 header-animate">
      <img src="https://assets.ubuntu.com/v1/29985a98-ubuntu-logo32.png" alt="Ubuntu Logo" class="w-16 h-16 mx-auto mb-3 logo-rotate">
      <h1 class="text-2xl font-semibold text-sky-100">Mini Server Dashboard</h1>
      <p class="text-sm text-slate-400 mt-1">Kumpulan layanan aktif di server Ubuntu â€¢ by IqballFarhan</p>
    </section>

    <!-- LINK GRID -->
    <section id="links" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-5 max-w-5xl mx-auto w-full"></section>

    <!-- LOGOUT BUTTON -->
    <section class="max-w-5xl mx-auto w-full mt-10 footer-animate">
      <button id="logout" class="w-full bg-rose-600 hover:bg-rose-500 text-white py-3 rounded-xl text-sm font-semibold transition glass border border-white/10">Logout</button>
      <p id="copyright" class="text-[11px] text-slate-500 text-center mt-5"></p>
    </section>
  </main>

  <script>
    // Check for authentication
    if (!sessionStorage.getItem('auth') && !localStorage.getItem('auth')) {
      window.location.href = 'login.html';
    }
    
    // Stars Animation
    const canvas = document.getElementById('stars-canvas');
    const ctx = canvas.getContext('2d');
    let stars = [];
    
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    
    class Star {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.size = Math.random() * 2;
        this.speedX = (Math.random() - 0.5) * 0.5;
        this.speedY = (Math.random() - 0.5) * 0.5;
        this.opacity = Math.random();
        this.opacityChange = (Math.random() - 0.5) * 0.02;
      }
      
      update() {
        this.x += this.speedX;
        this.y += this.speedY;
        this.opacity += this.opacityChange;
        
        if (this.opacity <= 0 || this.opacity >= 1) {
          this.opacityChange *= -1;
        }
        
        if (this.x < 0) this.x = canvas.width;
        if (this.x > canvas.width) this.x = 0;
        if (this.y < 0) this.y = canvas.height;
        if (this.y > canvas.height) this.y = 0;
      }
      
      draw() {
        ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }
    
    function initStars() {
      stars = [];
      const starCount = Math.floor((canvas.width * canvas.height) / 8000);
      for (let i = 0; i < starCount; i++) {
        stars.push(new Star());
      }
    }
    
    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      stars.forEach(star => {
        star.update();
        star.draw();
      });
      requestAnimationFrame(animate);
    }
    
    resizeCanvas();
    initStars();
    animate();
    
    window.addEventListener('resize', () => {
      resizeCanvas();
      initStars();
    });
    
    // Hide loading screen after page loads
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loading-screen').classList.add('hidden');
      }, 1500);
    });
    
    const LINKS = [
      { name: "Twitch Drop Miner #1", url: "https://twitchdrop.iqballfarhan.web.id/", desc: "EndlessKnight", icon: "ðŸŽ®", tag: "Public", ping: "/" },
      { name: "Twitch Drop Miner #2", url: "https://twitchdrop2.iqballfarhan.web.id/", desc: "IqballFarhan", icon: "ðŸŽ®", tag: "Public", ping: "/" },
      { name: "Twitch Drop Miner #3", url: "https://bekgor.iqballfarhan.web.id/", desc: "Bekgor.", icon: "ðŸŽ®", tag: "Public", ping: "/" },
      { name: "Portainer (Domain)", url: "https://portainer.iqballfarhan.web.id/#!/auth", desc: "UI Portainer via domain & reverse proxy.", icon: "ðŸ—‚ï¸", tag: "Public", ping: "/favicon.ico" },
      { name: "Portainer (LAN)", url: "http://192.168.1.17:9000/#!/auth", desc: "UI manajemen Docker lokal. Akses hanya dari jaringan lokal.", icon: "ðŸ› ï¸", tag: "LAN", ping: "/favicon.ico" },
      { name: "Beszel", url: "https://beszel.iqballfarhan.web.id/", desc: "Beszel server: monitoring & kontrol container.", icon: "ðŸ“ˆ", tag: "Public", ping: "/" },
      { name: "Speedtest", url: "https://speedtest.iqballfarhan.web.id/", desc: "LibreSpeed mandiri untuk uji jaringan.", icon: "ðŸš€", tag: "Public", ping: "/" },
      { name: "Web SSH Terminal", url: "https://ssh.iqballfarhan.web.id/", desc: "Akses terminal Ubuntu mini-server langsung dari browser melalui SSH Web UI.", icon: "ðŸ’»", tag: "Remote", ping: "/" },
      { name: "Cloudflare Tunnel Dashboard", url: "https://one.dash.cloudflare.com/64c507993f50bbbaca60d7df59e7486e/networks/tunnels", desc: "Panel Cloudflare Zero Trust â€¢ manajemen Argo Tunnel.", icon: "â˜ï¸", tag: "Cloud", ping: "/" }
    ];

    const container = document.getElementById('links');

    LINKS.forEach(link => {
      const div = document.createElement('div');
      div.className = "glass rounded-2xl p-5 border border-white/10 hover:border-sky-500/50 transition cursor-pointer text-left flex flex-col justify-between card-animate";
      div.innerHTML = `
        <div>
          <div class="flex items-center justify-between mb-2">
            <span class="text-2xl">${link.icon}</span>
            <span class="text-[10px] uppercase px-2 py-0.5 rounded-full bg-slate-800/60 border border-white/10 text-slate-300">${link.tag}</span>
          </div>
          <h2 class="text-base font-semibold mb-1">${link.name}</h2>
          <p class="text-xs text-slate-400 mb-3">${link.desc}</p>
        </div>
        <div class="flex items-center justify-between">
          <a href="${link.url}" target="_blank" class="text-sky-400 hover:text-sky-300 text-sm font-medium">Buka â†’</a>
          <span id="ping-${link.name.replace(/\W/g,'')}" class="ping-dot bg-gray-500"></span>
        </div>
      `;
      container.appendChild(div);

      // Ping check
      fetch(link.url + link.ping, { mode: 'no-cors' })
        .then(() => document.getElementById(`ping-${link.name.replace(/\W/g,'')}`).classList.add('bg-green-500','dot'))
        .catch(() => document.getElementById(`ping-${link.name.replace(/\W/g,'')}`).classList.add('bg-rose-500'));
    });

    // Set copyright year otomatis
    document.getElementById('copyright').innerHTML = `Â© <a href="https://www.instagram.com/iqballfarhan/" target="_blank" class="hover:text-sky-400 transition">IqballFarhan</a> ${new Date().getFullYear()}`;

    // Logout
    document.getElementById('logout').addEventListener('click', () => {
      // Add fade out animation
      document.body.style.opacity = '0';
      document.body.style.transition = 'opacity 0.3s ease-out';
      
      setTimeout(() => {
        localStorage.removeItem('auth');
        localStorage.removeItem('auth_exp');
        sessionStorage.removeItem('auth');
        window.location.href = 'login.html';
      }, 300);
    });
  </script>
</body>
</html>
